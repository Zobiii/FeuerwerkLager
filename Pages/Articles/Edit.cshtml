@page "{id:int?}"
@model FeuerwerkLager.Pages.Articles.EditModel
@{
    ViewData["Title"] = "Artikel bearbeiten";
}

<div class="page-header">
    <h2>Artikel bearbeiten</h2>
    <p>Stammdaten eines bestehenden Artikels √§ndern.</p>
</div>

<div class="form-card">
    @if (!Model.Articles.Any())
    {
        <p class="text-muted">
            Es sind noch keine Artikel vorhanden. Lege zuerst einen Artikel an.
        </p>
        <a asp-page="/Articles/Create" class="btn-main">‚ûï Artikel anlegen</a>
    }
    else
    {
        <div class="mb-3">
            <label class="form-label">Artikel ausw√§hlen</label>
            <select class="form-select"
                    onchange="if(this.value) window.location='@Url.Page("Edit")?id=' + this.value;">
                @foreach (var a in Model.Articles)
                {
                    <option value="@a.Id"
                            selected="@(a.Id == Model.Article.Id ? "selected" : null)">
                        @a.Name (@a.Company)
                        @if (!string.IsNullOrWhiteSpace(a.ProductNumber))
                        {
                            <text> - @a.ProductNumber</text>
                        }
                    </option>
                }
            </select>
        </div>

        <form method="post">
            <input type="hidden" asp-for="Article.Id" />

            <div asp-validation-summary="All" class="validation-summary-errors mb-3"></div>

            <div class="form-grid two-columns">
                <div class="form-group">
                    <label asp-for="Article.Name">Name</label>
                    <input asp-for="Article.Name" class="form-control" />
                </div>

                <div class="form-group">
                    <label asp-for="Article.Company">Firma</label>
                    <input asp-for="Article.Company" class="form-control" />
                </div>

                <div class="form-group">
                    <label asp-for="Article.ProductNumber">Produktnummer</label>
                    <input asp-for="Article.ProductNumber" class="form-control" />
                </div>

                <div class="form-group">
                    <label asp-for="Article.NEM">NEM (z.B. g)</label>
                    <input asp-for="Article.NEM" class="form-control" type="number" step="0.01" />
                </div>

                <div class="form-group">
                    <label asp-for="Article.Category">Kategorie</label>
                    <select asp-for="Article.Category" class="form-select">
                        <option value="">-- ausw√§hlen --</option>
                        <option>Raketen</option>
                        <option>Batterie</option>
                        <option>Verbund</option>
                        <option>Leuchtfeuerwerk</option>
                        <option>Knallartikel</option>
                        <option>Jugendfeuerwerk</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Einzelteile</label>
                    <div class="form-check">
                        <input asp-for="Article.IsMultiPart" class="form-check-input" type="checkbox" id="isMultiPartEdit" />
                        <label class="form-check-label" for="isMultiPartEdit">
                            Artikel besteht aus mehreren Einzelteilen
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label asp-for="Article.PiecesPerUnit">Einzelteile pro Artikel</label>
                    <input asp-for="Article.PiecesPerUnit" class="form-control" type="number" min="1" />
                    <small class="text-muted">z.B. 100 bei Schweizerkracher</small>
                </div>

                <div class="form-group" style="grid-column:1 / -1;">
                    <label asp-for="Article.Notes">Notizen</label>
                    <textarea asp-for="Article.Notes" class="form-control" rows="3"></textarea>
                </div>
            </div>

            <div class="mt-3 d-flex gap-2">
                <button type="submit" class="btn-main">
                    üíæ √Ñnderungen speichern
                </button>
                <a asp-page="/Index" class="btn-secondary-custom">
                    ‚¨ÖÔ∏è Zur√ºck zum Dashboard
                </a>
            </div>
        </form>
    }
</div>
